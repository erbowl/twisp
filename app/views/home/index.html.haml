= form_for @tweet,url:tweet_post_path,remote:true do |f|
  =f.text_area :content,id:"tweet_area"
  =f.submit :id=>"tweet_submit"

%a.twitter-timeline{:href => "https://twitter.com/"+@user.screenname+"?ref_src=twsrc%5Etfw"} Tweets by #{@user.screenname}
%script{:async => "", :charset => "utf-8", :src => "https://platform.twitter.com/widgets.js"}


:javascript
  var speech = new webkitSpeechRecognition();
  speech.lang = "ja";
  speech.start();
  speech.addEventListener( 'result' , function( e ) {
      result=e.results[0][0].transcript;
      document.getElementById("tweet_area").value=result;
      document.getElementById("tweet_submit").click();
      ss = new SpeechSynthesisUtterance(result);
      speechSynthesis.speak(ss);
  });
  speech.addEventListener( 'end' , function( e ) {
    if(speechSynthesis.speaking){
      ss.addEventListener('end',function(e){
        speech.start();
      });
    }else{
        speech.start();
    }
  });
